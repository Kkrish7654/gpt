import readline from "readline";
import OpenAI from "openai";
import dotenv from "dotenv";
import fs from "fs";
import { supabase } from "./lib/supabase.js";
dotenv.config();
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

function formatString(input) {
  const regex = /(?:^|-)([a-z])/g;
  const result = input?.replace(regex, (_, match) => ` ${match.toUpperCase()}`);
  return result;
}

function saveDataToFile(response) {
  // const dataAsString = JSON.stringify(response, null, 1);
  const formattedData = data
    .map(
      (item) => `[${JSON.stringify(item.id)}, ${JSON.stringify(item.industry)}]`
    )
    .join("\n");

  fs.appendFile("test.txt", formattedData, (error) => {
    if (error) {
      console.log(error);
      return;
    } else {
      console.log("file saved successfully");
    }
  });
}

//supabase
const { data } = await supabase
  .from("reports")
  .select("id, industry")
  .eq("industry", "food-and-beverages");

const selectedData = data ? data.slice(0, 50) : [];
// saveDataToFile(selectedData);
selectedData?.forEach((item) => {
  console.log("done");
});
//
console.log(data.length);
const openai = new OpenAI({
  apiKey: process.env.OPEN_AI_KEY,
});
let response = [];

function mainPrompt(market, industry) {
  const prompt = `You are a senior market research analyst with experience in the ${industry} industry. Your task is to draft a market report for the ${market} market. Please generate a Table of Contents (ToC) for the ${market} market report, similar to the example provided for the 2D chromatography market report. Example:  **Table of Contents** 1. Executive Summary 2. Research Methodology 3. 2D Chromatography Market Overview 3.1. Market Definition and Scope 3.2. Market Segmentation 3.3. Currency, Forecast, etc. 3.4. 2D Chromatography Market Dynamics 3.4.1. Market Drivers 3.4.2. Market Restraints 3.3.3. Market Opportunities 4. Market Challenges 5. Industry Trends 6. Regulatory Landscape 6.1. Overview of Regulatory Framework 2. Impact of Regulatory Policies on Market Growth 7. Impact of COVID-19 on the 2D Chromatography Market 1. Short-term and Long-term Implications 2. Shift in Market Dynamics and Consumer Behavior 8. Porter's Five Forces Analysis 1. Bargaining Power of Suppliers 2. Bargaining Power of Buyers 3. The threat of New Entrants 4. Threat of Substitutes 5. Competitive Rivalry 9. Key Insights and Findings 10. 2D Chromatography Market - Technology Overview 1. High-Performance Liquid Chromatography (HPLC) 2. Gas Chromatography (GC) 3. Supercritical Fluid Chromatography (SFC) 4. Other Techniques 11. 2D Chromatography Market, By Product: 1. 2D Gas Chromatography (2D GC) 1. 2D GC Instruments 1. 2D GC Systems 2. 2D GC Detectors 1. Flame Ionization Detectors 2. Electron Capture Detectors 3. Mass Spectrometer Detectors 4. Other GC Detectors 3. Other GC Instruments 4. 2D GC Consumables 1. 2D GC Columns 2. Other GC Consumables 5. 2D GC Accessories 2. 2D Liquid Chromatography (2D LC) 1. 2D LC Instruments 1. 2D LC Systems 2. 2D LC Detectors 1. UV/UV-Visible Detectors 2. Refractive Index Detectors 3. Fluorescence Detectors 4. Other LC Detectors 3. Other LC Instruments 2. 2D LC Consumables 1. 2D LC Columns 1. Reversed-Phase Columns 2. Ion Exchange Columns 3. Size-Exclusion Columns 4. Normal-Phase/Hydrophilic Interaction Columns 5. Hydrophobic Interaction Columns 6. Other Liquid Chromatography Columns 2. Other LC Consumables 3. 2D LC Accessories 1. 2D Chromatography Market, By Application 1. Life Science Research 1. Pharmaceutical and Biopharmaceutical Applications 2. Biotechnology Applications 2. Environmental Analysis 3. Food and Beverage Testing 4. Petrochemical and Natural Gas Analysis 5. Other Applications 2. 2D Chromatography Market, By Region 1. North America 1. USA 2. Canada 3. Mexico 4. Rest of North America 2. Europe 1. Germany 2. United Kingdom 3. France 4. Italy 5. Russia 6. Spain 7. Rest of Europe 3. Asia-Pacific 1. India 2. China 3. Australia 4. Japan 5. Rest of Asia-Pacific 4. South America 1. Brazil 2. Argentina 3. Rest of South America 5. Middle East & Africa 1. United Arab Emirates 2. South Africa 3. Rest of Middle East and Africa 3. Company Profiles - Agilent Technologies - Thermo Fisher Scientific - Waters Corporation - Shimadzu Corporation - PerkinElmer - Bio-Rad Laboratories - Bruker Corporation - GE Healthcare - JEOL Ltd. - Hitachi High-Technologies Corporation - Phenomenex Inc. - Restek Corporation - GL Sciences Inc. - LECO Corporation - KNAUER Wissenschaftliche Ger√§te GmbH - Metrohm AG - Danaher Corporation - Kromasil - Tosoh Corporation - Sepax Technologies Inc. - YMC Co. Ltd. - Daicel Corporation - Polymer Char - SIELC Technologies - Chromatotec - JASCO Inc. - Kanto Chemical Co. Inc. - Merck KGaA - Sigma-Aldrich Corporation - W.R. Grace & Co. - Advanstar Inc. - Axcend Corporation - TOSOH Bioscience GmbH - Mac-Mod Analytical Inc. - Eksigent Technologies LLC - Regis Technologies Inc. - Macherey-Nagel GmbH & Co. KG - Develosil Co. Ltd. - Advanced Materials Technology Pty Ltd. - Kinesis Ltd. - ACE C18 - Chiral Technologies Inc. - Hamilton Company - Gilson Inc. - DANI Instruments S.p.A. - VUV Analytics Inc. - GL Science Inc. - SGE Analytical Science Pty Ltd. - ZirChrom Separations Inc. - Advanced Chromatography Technologies Ltd. - Shodex Corporation - M&CTech - Hichrom Limited - CERI - Nacalai Tesque Inc. - MIP Technologies 1. Competitive Landscape 1. Market Share Analysis 2. Competitive Landscape 3. Mergers and Acquisitions 4. Market Growth Strategies 2. Investment Analysis 1. Investment Opportunities in the 2D Chromatography Market 2. Return on Investment (RoI) analysis 3. Key factors influencing Investment decisions 4. Investment Outlook and Future Prospects 3. Strategic Recommendations 1. Market Entry Strategies for New Players 2. Expansion and Diversification Strategies for Existing Players 3. Product Development and Innovation Strategies 4. Collaborative Strategies and Partnerships 5. Marketing and Branding Strategies 6. Customer Retention and Relationship Management Strategies 4. Appendix 1. Data Sources 2. Abbreviations 3. Disclaimer Please note that you should generate a similar ToC for the ${market} market report while adapting the sections and sub-sections to the specific context of the market ${market} Market industry. Give me the list of names of companies operating in the ${market} market in the place of companies (as many as possible) but generate in html format of <ol> and <li>`;
  return prompt;
}

let prompt = [
  mainPrompt("1,3-Propanediol", "Chemicals & Materials"),
  "Based on below Table of Contents, ToC, Generate content (3000 words) for the below sections based on attached content format example: 1. What is the Market Size & CAGR of Market market in 2021? 2. COVID-19 Impact on the Market Market 3. Market Dynamics 4. Segments and Related analysis 5. By Region Analysis 6. Key Market Players and Competitive Landscape 7. Recent happenings in the Market Market Content format example: Anticoccidial Drugs Market Size (2021 to 2030) The global anticoccidial drugs market is expected to have a growth rate of 3.61% CAGR from 2021 to 2030. As a result, the market is anticipated to grow by USD 1691.94 Million by 2028. Anticoccidial Drugs Market Share Insights: Based on the Drug type, the ionophore anticoccidials segment had the largest market share of the global anticoccidial drugs market in 2022. Based on animal type, the poultry animal segment had the largest market share of the global anticoccidial drugs market in 2022. The North American anticoccidial drugs market had the most significant global market share in 2022. Anticoccidial drugs are a part of the veterinary medicine industry. These drugs are used to prevent and treat coccidiosis in animals. When animals are diagnosed with coccidiosis, they suffer from diarrhea, weight loss, and reduced growth and productivity. Coccidiosis can also result in death in some cases. Coccidiosis majorly impacts the intestines of animals. This parasitic disease is infectious. To treat coccidiosis, anticoccidial drugs are used in the treatment procedures to remove the parasites. Anticoccidial drugs are of two types, which are ionophores and chemical anticoccidials. Monensin and salinomycin are ionophores, and sulfonamides and nitroimidazoles are chemical anticoccidials. As said earlier, these drugs are primarily used to control the spread of coccidiosis; however, the consumption of the drugs has to be according to the saying of veterinarians, and overuse of these drugs could result in other animal problems. Impact of COVID-19 on the global anticoccidial drugs market: The disease has spread to almost every country globally since the COVID-19 virus outbreak in December 2019, prompting the World Health Organization to declare it a public health emergency. Coccidiosis is a viral disease caused by a single-cell parasite that can only be seen under a microscope. It affects the intestinal tracts of animals. Weight loss, moderate sporadic to extreme diarrhea, diarrhea containing blood or mucus, dehydration, and decreased breeding are all signs of coccidiosis, one of the most common parasitic diseases in domesticated animals. Growing clinical trials in developing medicines or vaccines for animals to prevent infections propels this market's growth rate to new heights. Anticoccidial drugs are drug preparations used to treat coccidiosis in animals. These are given to animals and birds to stop coccidia from reproducing and destroying protozoa in the intestine. In some countries, the transmission of coronavirus from humans to animals boosts the market's growth rate during these pandemic times. In addition, key strategies and increasing awareness of social distancing and wearing masks among market players are expected to boost demand for anticoccidial drugs during the forecast period. MARKET DRIVERS: YOY growth in the prevalence of coccidiosis and increasing focus on animal health primarily accelerates the global anticoccidial drugs market. Anticoccidial drugs are the agents used to treat, prevent, and control coccidial infections. However, there is a risk of increased coccidiosis due to environmental factors and others, such as contamination or other issues related to hygienic measures. Hence, there is an alarming demand for newer anticoccidial drugs in the drug market. Increasing the need to prevent the spread of diseases in animals with effective medication and the rise in the consumption rate of meat and poultry products are the primary reasons driving the growth of the global anticoccidial drugs market. The growing number of veterinary hospitals, rise in demand to improve the quality of drugs with different techniques, growing disposable income in urban areas, and people's concern towards maintaining a healthy diet are further helping the global anticoccidial drugs market to grow. According to the data published by the American Veterinary Medical Association (AVMA), an estimated 20,000 veterinary clinics, hospitals, and 90,000 veterinary practitioners were there in the United States in 2021. Additionally, growing support from the government through investments, the rising demand to increase the production rate of drugs with high quality, and increasing concern towards animals' health conditions further accelerate market growth. For instance, the United States Department of Agriculture (USDA) invested an amount of USD 19 million in conducting R&D for animal health and animal diseases to prevent, control, and treat various diseases in livestock and poultry and also to innovate new veterinary medical equipment, diagnostic tools, and treatment procedures via NIFA in 2019. Likewise, the Australian government announced an investment of USD 100 million for veterinary healthcare, primarily to conduct R&D to develop advanced medical devices, drugs, and treatment procedures for various animal diseases in 2020. Furthermore, the adoption of the latest technology, the launch of valuable products, and the rising number of infectious diseases among animals and birds are expected to fuel the growth opportunities for the global anticoccidial drugs market. MARKET RESTRAINTS: However, the need for more skilled persons in manufacturing appropriate drugs with correct dosage forms slowly restricts the global anticoccidial drug market growth. In addition, the availability of other drugs at a lower cost and fluctuations in the prices of final products due to less availability of raw materials are expected to limit the growth of the global anticoccidial drugs market. This research report on the global anticoccidial drugs market has been segmented and sub-segmented based on the drug type, animal type, and region. Anticoccidial Drugs Market - By Drug Type: Antibiotic Anticoccidials Ionophore Anticoccidials Chemical Derivative Anticoccidials By drug type, the ionophore anticoccidials segment witnessed the highest global market share in 2022. The growing awareness regarding the advantages of ionophores, such as improved efficacy, faster action, and a lower risk of drug resistance developing among veterinary practitioners, is propelling segmental growth. In addition, the growing R&D activities around ionophores to bring innovative and effective drugs to the market further promote the segment's growth rate. Furthermore, ionophores are safe for animals as they contain low toxicity levels, due to which the adoption of ionophores is growing and resulting in segmental growth. The antibiotic anticoccidials drug segment is expected to grow at the fastest CAGR during the forecast period. The rise in the scale of research institutes to introduce certain types of drugs at high quality with the latest technology boosts segmental growth. Also, the growing economy in almost every region magnifies the segment's growth rate. Anticoccidial Drugs Market - By Animal Type: Poultry Swine Fish Cattle Companion Animal Based on animal type, the poultry animal segment led the anticoccidial drugs market in 2022, and the segment's domination is likely to continue during the forecast period. The growing adoption of anticoccidial drugs primarily drives the segment's growth by poultry producers to improve the productivity and overall health of the birds. In addition, the emergence of the latest technological developments, and the growing incidence of coccidiosis, especially in food-producing animals, are fuelling the segment's growth rate. On the other hand, the companion animal segment is anticipated to witness a promising CAGR during the forecast period. Factors such as increasing pet ownership worldwide, rising awareness regarding veterinary healthcare, and the availability of anticoccidial drugs in several countries are promoting segmental growth. As a result, the adoption of companion animals such as cats and dogs is growing significantly worldwide. In addition, the growing incidence of coccidiosis among companion animals accelerates the segment's growth. Anticoccidial Drugs Market - By Region: North America Europe Asia Pacific Latin America Middle East and Africa Regionally, the North American anticoccidial drugs market was the most dominating region in the global market in 2021 and was worth USD 393.18 million in 2022. The adoption of advanced manufacturing drug techniques majorly drives this regional market. In addition, launching innovative medicines that favor producing the most top-quality products significantly influences the global anticoccidial drugs market. The adoption of companion animals is increasing in North American countries, which is expected to contribute to the growth of the North American market. For instance, dogs are widely adopted in the U.S., followed by cats. According to studies, 60 million households have dogs as pets, and 47 million have cats as their pets in the United States. The presence of well-organized animal healthcare systems in the North American region favors the anticoccidial drugs market in this region. The increasing accessibility of anticoccidial drugs to pet owners via veterinary hospitals and online pharmacies is anticipated to favor regional market growth. The APAC anticoccidial drugs market is forecasted to be growing at a CAGR of 4.3% from 2022 to 2027. The Asia Pacific market accounted for the second largest global market share in 2021 owing to the growing pet population, increasing demand for poultry products, and increasing support and funding from the APAC countries. In addition, the growth rate of the APAC market is also fuelled by the increasing scale of the regional pharmaceutical industries. The European anticoccidial drugs market is predicted to grow at a promising CAGR during the forecast period due to the growing meat consumption rate. Furthermore, the presence of a sophisticated pet care industry in the European region is anticipated to boost the growth rate of the European market. In addition, factors such as the growing usage of anticoccidial drugs for companion animals and poultry animals in European countries and the growing availability of anticoccidial drugs via various channels are favoring the growth of the European market. As a result, the U.K. market is estimated to account for most of the share in the European market during the forecast period. The Latin American anticoccidial drugs market is projected to grow steadily during the forecast period. Brazil, followed by Mexico, led the anticoccidial drugs market in Latin America in 2021. The MEA anticoccidial drugs market is projected to have a prominent growth rate in the coming years. The usage of anticoccidial drugs is growing substantially in the Middle East and African countries owing to the growing MEA poultry industry and increasing incidence of coccidiosis among birds. In addition, the rising consumption levels of meat and poultry products are expected to fuel the need for anticoccidial drugs in this region during the forecast period. KEY MARKET PLAYERS: Noteworthy companies in the global anticoccidial drugs market profiled in this report are Bayer Health care, Zoetis, Elanco, Merial, Merck Animal Healthcare, Ceva Sant√© Animale, Virbac, Boehringer Ingelheim Animal Health, Novartis Animal Healthcare, and Smartvet Inc. The global anticoccidial drugs market is highly competitive, and major players have adopted product development strategies, mergers, acquisitions, and partnerships to maximize their market share. RECENT DEVELOPMENTS IN THE MARKET: In April 2022, Amlan International, a U.S.-based company operating in veterinary healthcare, announced natural alternatives to anticoccidial drugs. In May 2020, Zoetis showed suckling calves with significant weight gain from implants. It is a considerable increase in weaning weight. In September 2019, Virbac launched Multimin, which is used for cattle. In October 2019, Ceva Sante Animale agreed with ProBioGen, the manufacturer, to represent a transformation of poultry vaccines with the help of ProBioGen's proprietary AGE1.CR technology. AGE1 is a preserved cell line that is obtained from the duck. This cell line is created as a platform to restore chicken cells to manufacture vaccines related to poultry. In addition, Ceva and ProBioGen have a long track in introducing new veterinary vaccines through additional research and development programs.",
  "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030.  ",
  mainPrompt("1,4 Butanediol", "Chemicals & Materials"),
  "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030.  ",
  mainPrompt("1,6-Hexanediol", "Chemicals & Materials"),
  "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030.  ",

  mainPrompt("1-Decanol ", "Chemicals & Materials"),
  "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030.  ",

  mainPrompt("1-Decene", "Chemicals & Materials"),
  "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030.  ",
];

let temps = [
  // "text1",
  { id: "automotive-micro-motor", industry: "automotive-and-mobility" },
  `Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030`,
];

async function main() {
  let chatHistory = []; // Store conversation history
  // for (const prompt of allPromts) {
  for (const item of prompt) {
    // temps[0] = item;
    // for (const temp of temps) {
    try {
      if (chatHistory.length > 2) {
        chatHistory = [];
      }
      const messages = chatHistory.map(([role, content]) => ({
        role,
        content,
      }));
      // if (chatHistory.length === 0) {
      messages.push({
        role: "user",
        content: mainPrompt(formatString(item.id), formatString(item.industry)),
        // Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030
      });
      // } else {
      //   messages.push({
      //     role: "user",
      //     content: temp,
      //     // content: mainPrompt(formatString(temp.id), formatString(temp.industry)),
      //     // content: "Table of Contents Toc Based on the above ToC, generate a title similar to the below: 2D Chromatography Market Market Research Report ‚Äì Segmented By Product (Gas Chromatography (2D GC), Liquid Chromatography (2D LC)), By Application (Life Science Research, Environmental Analysis, Food and Beverage Testing, Petrochemical and Natural Gas Analysis, Other Applications), By End Users (Biotechnology And Pharmaceutical Industries, Ambulatory Surgery Centers, Hospitals, Cancer Research Laboratories, Agriculture And Food Industries, Specialty Clinics, Others) & Region (North America, Europe, Asia-Pacific, Middle-East & Africa, Latin America) ‚Äì Analysis on Size, Share, Trends, COVID-19 Impact, Competitive Analysis, Growth Opportunities and Key Insights from 2021 to 2030"
      //   });
      // }
      // console.log(messages, "lul");

      const chatCompletion = await openai.chat.completions.create({
        model: "gpt-3.5-turbo",
        messages: messages,
      });

      const completionText = chatCompletion?.choices[0]?.message?.content;
      console.log(completionText)
      response.push(completionText);

      // Update history with user input and assistant response
      chatHistory.push(["user", item]);
      chatHistory.push(["assistant", completionText]);
    } catch (error) {
      console.log(error);
    }
    // }
  }
  // console.log("chatHistory", chatHistory);

  // Close the readline interface
  rl.close();
}

main().then(() => {
  // saveDataToFile(response);
  console.log(response);
});
